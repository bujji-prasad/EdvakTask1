
<div class="task-container">
    
    <!-- Task Filters and Search -->
    <section class="filters-section">
        <div class="search-bar">
            <input [(ngModel)] = "searchValue" (change) = "onSearchTitle()" type="text" placeholder="Search tasks by title...">
        </div>
        <div class="filters">
            <select [(ngModel)]="priorityValue" (change)="onChangePriority()">
                <option value="">Priority</option>
                <option value="Low">Low</option>
                <option value="Medium">Medium</option>
                <option value="High">High</option>
            </select>
            <select [(ngModel)]="statusValue" (change)="onChangeStatus()">
                <option value="">Status</option>
                <option value="Pending">Pending</option>
                <option value="In-progress">In-progress</option>
                <option value="Completed">Completed</option>
            </select>
        </div>
    </section>

    <!-- Task Table (with Pagination) -->
    <section class="task-list">
        <table>
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Assigned To</th>
                    <th>Due Date</th>
                    <th>Priority</th>
                    <th>Status</th>
                    <!-- <th>Ischecked</th> -->
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor = "let task of filteredTasks">
                    <td>{{task.title}}</td>
                    <td>{{task.description}}</td>
                    <td>{{task.assignedTo}}</td>
                    <td>{{task.dueDate}}</td>
                    <td>{{task.priority}}</td>
                    <td>{{task.status}}</td>
                    <!-- <td>{{task.markasRead}}</td> -->
                    <td>
                        <button class="edit-btn" (click) = "onUpdateTask(task._id)">Edit</button>
                        <button class="delete-btn" (click) = "onTaskDelete(task._id)">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
        <!-- Pagination Controls -->
        <div class="pagination">
            <button (click)="previousPage()" [disabled]="currentPage === 1">Previous</button>
            <span>Page {{currentPage}} of {{totalPages}}</span>
            <button (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
        </div>
        

    </section>

    <!-- Add New Task Button -->
    <section class="add-task">
        <button (click) = "createTask()">Add New Task</button>
    </section>

    <!-- Confirmation Popup for Deleting Task -->
    <div class="modal1" *ngIf="isDelete" [ngClass]="{'active': isDelete}">
        <div class="modal-content1">
            <h3>Are you sure you want to delete this task?</h3>
            <button (click) = "onDeleteConfirm()">Yes</button>
            <button (click) = "onDeleteCancel()">No</button>
        </div>
    </div>

    <!-- Task Form Modal -->
    <div class="modal" *ngIf="isCreateTaskOpen" [ngClass]="{'active': isCreateTaskOpen}">
        <div class="modal-content">
        <h2>{{ isCreateTask ? 'Create New Task' : 'Update Task' }}</h2>
        <form (ngSubmit)="onTaskCreated()" #taskForm="ngForm">
            <!-- Title -->
            <div>
            <label for="title">Title</label>
            <input type="text" id="title" [(ngModel)]="Task.title" name="title" required />
            </div>
    
            <!-- Description -->
            <div>
            <label for="description">Description</label>
            <textarea id="description" name="description" [(ngModel)]="Task.description" required></textarea>
            </div>
    
            <!-- Assigned To -->
            <div>
            <label for="assignedTo">Assigned To</label>
            <select id="assignedTo" name="assignedTo" [(ngModel)]="Task.assignedTo" required>
                <option value="User1">User 1</option>
                <option value="User2">User 2</option>
                <option value="User3">User 3</option>
            </select>
            </div>
    
            <!-- Due Date -->
            <div>
            <label for="dueDate">Due Date</label>
            <input type="date" id="dueDate" [(ngModel)]="Task.dueDate" name="dueDate" required />
            </div>
    
            <!-- Priority -->
            <div>
            <label for="priority">Priority</label>
            <select [(ngModel)]="Task.priority" name="priority" required>
                <option value="Low">Low</option>
                <option value="Medium">Medium</option>
                <option value="High">High</option>
            </select>
            </div>
    
            <!-- Status -->
            <div>
            <label>Status</label>
            <input type="radio" [(ngModel)]="Task.status" id="pending" name="status" value="Pending" required />
            <label for="pending">Pending</label>
            <input type="radio" [(ngModel)]="Task.status" id="inProgress" name="status" value="In-progress" required />
            <label for="inProgress">In Progress</label>
            <input type="radio" [(ngModel)]="Task.status" id="completed" name="status" value="Completed" required />
            <label for="completed">Completed</label>
            </div>
    
            <!-- Mark as Read -->
            <div>
            <label for="isRead">Mark as Read</label>
            <input type="checkbox" id="isRead" name="isRead" [(ngModel)]="Task.markasRead" />
            </div>
    
            <!-- Modal Buttons -->
            <div class="modal-buttons">
            <button type="submit" [disabled]="taskForm.invalid">
                {{ isCreateTask ? 'Create Task' : 'Update Task' }}
            </button>
            <button type="button" (click)="closeCreateTask()">Cancel</button>
            </div>
        </form>
        </div>
    </div>
  

</div>